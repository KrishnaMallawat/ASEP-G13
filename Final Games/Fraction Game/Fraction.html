<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FRACTION FIELD</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
      integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Carme&family=Geologica:wght@100..900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Prata&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
  margin: 0;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: geologica;
  background-image: url("Fraction BG.png");
  background-size: cover;
  background-attachment: fixed;
  background-repeat: no-repeat;
  padding: 16px;
  box-sizing: border-box;
}

.left {
  width: 25%;
  height: 70vh;
  margin-left: 11%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  margin-top: 15dvh;
}

.right {
  width: 55%;
  height: 67.2vh;
  background-image: url("Fraction Field.png");
  background-size: cover;
  background-position: center;
  border: 3px solid #fff;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  margin-top: 12.7dvh;
  margin-left: 3dvh;
}

.container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
  gap: 5px;
  width: 100%;
  padding: 1vh;
  padding-bottom: 1dvh;
}

.cell {
  width: 100%;
  padding-bottom: 100%;
  position: relative;
  margin-bottom: 15px;
}

.flower {
  position: absolute;
  top: 0;
  left: 0;
  height: 16dvh;
  width: 100%;
  object-fit: contain;
  transition: opacity 0.3s;
  margin-top: -30px;
}

.question,
.buttonstab {
  width: 100%;
  text-align: center;
  margin-bottom: 4dvh;
}
.buttonstab{
  margin-top: -1dvh;
}
.count {
  background-color: #ffe46bc6;
  border-radius: 5px;
  padding: 8px;
  margin-bottom: 10px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

button {
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
  border: none;
  background-color: #007bff;
  color: #fff;
  border-radius: 5px;
  transition: background-color 0.3s;
  font-family: geologica;
  width: 70%;
  margin-bottom: 1dvh;
}

button:hover {
  background-color: #0056b3;
}

#question {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}

#questionNumber,
#score {
  background-color: #007bff50;;
  border-radius: 5px;
  padding: 8px;
  margin-bottom: 5px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
margin-top: 2.5dvh;
}
#mixedFraction{
  border-radius: 5px;
  padding: 8px;
  margin-bottom: 5px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  margin-top: 2.5dvh;
  background-color: #ffe46be2;
}
/* Media Queries for Smaller Screens */
@media (max-width: 1024px) {
  body{
    background-image: url(Fraction\ BG\ g.png);
  }
  .left,
  .right {
    width: 100%;
    height: auto;
    margin: 0;
  }
.left{
  margin-left: 10dvh;
}
.right{
  margin-right: 25dvh;
}
  .container {
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
  }

  .flower {
  height: 9vh;
  margin-bottom: -5dvh;
  padding: 0;
  }

  button {
    width: 100%;
    margin-bottom: 10px;
  }
.question,
.buttonstab {
  width: 80%;
  text-align: center;

}
#resetButton {
  display: none;
}
}
@media (max-width: 768px) {
  body {
    flex-direction: column;
    align-items: stretch;
  }

  .left,
  .right {
    width: 100%;
    height: auto;
  }


  .container {
    grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
  }

  .flower {
  height: 6vh;
  margin: 2px;
  padding: 0;
}
}

    </style>
  </head>
  <body>
    <div class="left">
      <div class="question">
        <p id="mixedFraction"></p>
        <p id="count">
          Wheat stalks harvested: <span id="flowerCount">0</span>
        </p>
        <div id="questionNumber">Question 1 of 5</div>
        <div id="score">Score: 0</div>
      </div>
      <div class="buttonstab">
        <div class="buttonicons">
          <button id="backButton">Back</button>
          <button id="submitButton">Submit</button>
          <button id="resetButton">Reset</button>
          <p id="resultMessage"></p>
        </div>
      </div>
    </div>

    <div class="right">
      <div class="container">
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
        <div class="cell">
          <img src="Untitled design (5).png" class="flower" />
        </div>
      </div>
    </div>

    <script >
      // Initialize game variables
      let flowerCount = 0;
      let score = 0;
      let currentQuestion = 1;
      const totalQuestions = 5;
      const hoveredCells = [];
      const results = [];

      // Function to generate a random question with specific conditions
      function generateQuestion() {
        let numerator, denominator, multiplicand, result;

        do {
          numerator = Math.floor(Math.random() * 10) + 1; // 1 to 9
          denominator =
            Math.floor(Math.random() * (10 - numerator)) + numerator + 1; // Greater than numerator and up to 10
          multiplicand = Math.floor(Math.random() * 12) + 1; // 1 to 10
          result = (numerator / denominator) * multiplicand;
        } while (
          !Number.isInteger(result) ||
          result < 1 ||
          result > 24 ||
          denominator === multiplicand // Ensure denominator and multiplicand are not the same
        );

        document.getElementById(
          "mixedFraction"
        ).innerText = `A Farmer harvests [ ${numerator} / ${denominator} ] Wheat Stalks from a section of his farm at once. He further harvests ${multiplicand} such sections, What are the total number of wheat stalk harvested?`;
        return result;
      }

      let correctAnswer = generateQuestion(); // Generate the first question

      // Handle mouseover events on cells
      document.querySelectorAll(".cell").forEach((cell) => {
        cell.addEventListener("click", function () {
          const flower = cell.querySelector(".flower");
          if (flower && flower.style.opacity !== "0") {
            flower.style.opacity = "0"; // Hide flower
            flowerCount++;
            hoveredCells.push(cell); // Track hovered cells
            document.getElementById("flowerCount").innerText = flowerCount;
          }
        });
      });

      // Handle the "Submit" button click
      document
        .getElementById("submitButton")
        .addEventListener("click", function () {
          const isCorrect = flowerCount === correctAnswer;
          alert(
            isCorrect
              ? "Correct! You harvested the right amount of wheat stalks."
              : "Oops! That's not the right amount. Try again next time."
          );
          if (isCorrect) score++;

          results.push({
            question: document.getElementById("mixedFraction").innerText,
            isCorrect: isCorrect,
          });

          updateQuizState();

          if (currentQuestion < totalQuestions) {
            proceedToNextQuestion();
          } else {
            // Save results to localStorage and redirect to the results page
            localStorage.setItem("score", score);
            localStorage.setItem("results", JSON.stringify(results));
            window.location.href = "Results.html";
          }
        });

      document.querySelectorAll(".cell").forEach((cell) => {
        cell.addEventListener("click", function () {
          const flower = cell.querySelector(".flower");
          if (flower && flower.style.opacity !== "0") {
            flower.classList.add("shake"); // Add shake class
            setTimeout(() => {
              flower.style.opacity = "0"; // Hide flower after shake
              flower.classList.remove("shake"); // Remove shake class
            }, 500); // Duration of shake animation in milliseconds

            flowerCount++;
            hoveredCells.push(cell); // Track clicked cells
            document.getElementById("flowerCount").innerText = flowerCount;
          }
        });
      });

      // Handle the "Reset" button click
      document
        .getElementById("resetButton")
        .addEventListener("click", function () {
          resetGame();
        });

      // Handle the "Back" button click to undo the last hover
      document
        .getElementById("backButton")
        .addEventListener("click", function () {
          if (hoveredCells.length > 0) {
            const lastHoveredCell = hoveredCells.pop();
            const flower = lastHoveredCell.querySelector(".flower");
            if (flower) {
              flower.style.opacity = "1"; // Restore the flower
              flowerCount--;
              document.getElementById("flowerCount").innerText = flowerCount;
            }
          }
        });

      // Reset the game state
      function resetGame() {
        flowerCount = 0;
        hoveredCells.length = 0;
        document.getElementById("flowerCount").innerText = flowerCount;
        document.querySelectorAll(".flower").forEach((flower) => {
          flower.style.opacity = "1"; // Restore all flowers
        });
        correctAnswer = generateQuestion(); // Regenerate the question
      }

      // Proceed to the next question
      function proceedToNextQuestion() {
        currentQuestion++;
        if (currentQuestion <= totalQuestions) {
          resetGame();
          document.getElementById(
            "questionNumber"
          ).innerText = `Question ${currentQuestion} of ${totalQuestions}`;
        }
      }

      // Update quiz state on the UI
      function updateQuizState() {
        document.getElementById("score").innerText = `Score: ${score}`;
      }
    </script>
  </body>
</html>
